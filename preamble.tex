\documentclass[a4paper,11pt,fleqn,dvipsnames,twoside, openright ]{memoir} 	% Openright aabner kapitler paa hoejresider (openany begge)

%%%% PACKAGES %%%%

% ¤¤ Oversaettelse og tegnsaetning ¤¤ %
\usepackage[utf8]{inputenc}					% Input-indkodning af tegnsaet (UTF8)
\usepackage[english]{babel}					% Dokumentets sprog
\usepackage[T1]{fontenc}					% Output-indkodning af tegnsaet (T1)
\usepackage{ragged2e,anyfontsize}			% Justering af elementer
\usepackage{lscape}                         % For portræt mode i sideopsætning


% ¤¤ Figurer, tabeller (floats) og listings ¤¤ %
\usepackage{geometry}
\usepackage{graphicx} 						% Haandtering af eksterne billeder (JPG, PNG, EPS, PDF)
\usepackage{epstopdf}
%\usepackage{eso-pic}						% Tilfoej billedekommandoer paa hver side
%\usepackage{wrapfig}						% Indsaettelse af figurer omsvoebt af tekst. \begin{wrapfigure}{Placering}{Stoerrelse}
\usepackage{multirow}                		% Fletning af raekker og kolonner (\multicolumn og \multirow)
\usepackage{multicol}         	        	% Muliggoer output i spalter
\usepackage{rotating}						% Rotation af tekst med \begin{sideways}...\end{sideways}
\usepackage{colortbl} 						% Farver i tabeller (fx \columncolor og \rowcolor)
\definecolor{lightgray}{gray}{0.9}
\usepackage{flafter}						% Soerger for at floats ikke optraeder i teksten foer deres reference
\let\newfloat\relax 						% Justering mellem float-pakken og memoir
\usepackage{float}							% Muliggoer eksakt placering af floats, f.eks. \begin{figure}[H]
\usepackage{placeins}                       % \FloatBarrier
\usepackage{bytefield}                      %% Use for drwawing network packages
\usepackage{gensymb}
\usepackage{etex}                           % Er med for at få bytefields til at virke med hele gruppens LaTeX installationer.
\usepackage[final]{listings}						% Placer kildekode i dokumentet med \begin{lstlisting}...\end{lstlisting}
\usepackage{tabularx}
\usepackage{capt-of}
\usepackage{rotating}                       %for sidewaystable -extention
\usepackage{morewrites}						% Forøger antallet af output streams (dafault 16)
% ¤¤ Matematik mm. ¤¤
\usepackage{amsmath,amssymb,stmaryrd} 		% Avancerede matematik-udvidelser
\usepackage{mathtools}						% Andre matematik- og tegnudvidelser
\usepackage{textcomp}                 		% Symbol-udvidelser (f.eks. promille-tegn med \textperthousand )
\usepackage{rsphrase}						% Kemi-pakke til RS-saetninger, f.eks. \rsphrase{R1}
\usepackage[version=3]{mhchem} 				% Kemi-pakke til flot og let notation af formler, f.eks. \ce{Fe2O3}
\usepackage{siunitx}						% Flot og konsistent praesentation af tal og enheder med \si{enhed} og \SI{tal}{enhed}
\sisetup{output-decimal-marker = {,}}		% Opsaetning af \SI (DE for komma som decimalseparator)

% ¤¤ Referencer og kilder ¤¤ %
\usepackage[english]{varioref}				% Muliggoer bl.a. krydshenvisninger med sidetal (\vref)
%\usepackage{natbib}							% Udvidelse med naturvidenskabelige citationsmodeller
\usepackage[style=numeric,natbib=true,backend=biber,bibencoding=ascii,sorting=none,maxnames=99,maxcitenames=1,urldate=long]{biblatex}
\usepackage{csquotes}
%\usepackage{xr}							% Referencer til eksternt dokument med \externaldocument{<NAVN>}

%%UPPAAL and dependencies
\usepackage{color}
\usepackage{xspace}
\usepackage{UppaalStyle/uppaal}

%% Tikz
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}

%% Special Tikz styles for flow chart
\tikzstyle{decision} = [diamond, draw, fill=blue!20,
    text width=4.5em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20,
    text width=5em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw, -latex']
\tikzstyle{cloud} = [draw, ellipse,fill=red!20, node distance=3cm,
    minimum height=2em]

\def\ab{.4}
\tikzset{
	net node/.style = {circle, minimum width=2*\ab cm, inner sep=0pt, outer sep=0pt, ball color=blue!50!cyan},
	net connect/.style = {line width=1pt, draw=blue!50!cyan!25!black},
	net root node/.style = {net node, minimum width=3*\ab cm},
	net thick connect/.style = {net connect, line width=2.5pt},
}


% ¤¤ Misc. ¤¤ %
\usepackage{lipsum}							% Dummy text \lipsum[..]
\usepackage[shortlabels]{enumitem}			% Muliggoer enkelt konfiguration af lister
\usepackage{pdfpages}						% Goer det muligt at inkludere pdf-dokumenter med kommandoen \includepdf[pages={x-y}]{fil.pdf}
\pdfoptionpdfminorversion=6					% Muliggoer inkludering af pdf dokumenter, af version 1.6 og hoejere
\pretolerance=2500 							% Justering af afstand mellem ord (hoejt tal, mindre orddeling og mere luft mellem ord)

% Kommentarer og rettelser med \fxnote. Med 'final' i stedet for 'draft' udloeser hver note en error i den faerdige rapport.
\usepackage[footnote,draft,english,silent,nomargin]{fixme}


%%%% CUSTOM SETTINGS %%%%

% ¤¤ Marginer ¤¤ %
\setlrmarginsandblock{3.5cm}{2.5cm}{*}		% \setlrmarginsandblock{Indbinding}{Kant}{Ratio}
\setulmarginsandblock{2.5cm}{3.0cm}{*}		% \setulmarginsandblock{Top}{Bund}{Ratio}
\checkandfixthelayout 						% Oversaetter vaerdier til brug for andre pakker

%	¤¤ Afsnitsformatering ¤¤ %
\setlength{\parindent}{0mm}           		% Stoerrelse af indryk
\setlength{\parskip}{3mm}          			% Afstand mellem afsnit ved brug af double Enter
\linespread{1,1}							% Linie afstand

% ¤¤ Litteraturlisten ¤¤ %
%\bibpunct[,]{[}{]}{;}{a}{,}{,} 				% Definerer de 6 parametre ved Harvard henvisning (bl.a. parantestype og seperatortegn)
%\bibliographystyle{bibtex/harvard}			% Udseende af litteraturlisten.
%\bibliographystyle{unsrt}
\addbibresource{bib.bib}

% ¤¤ Indholdsfortegnelse ¤¤ %
\setsecnumdepth{subsection}		 			% Dybden af nummerede overkrifter (part/chapter/section/subsection)
\maxsecnumdepth{subsection}					% Dokumentklassens graense for nummereringsdybde
\settocdepth{subsection} 					% Dybden af indholdsfortegnelsen

% ¤¤ Lister ¤¤ %
\setlist{
  topsep=0pt,								% Vertikal afstand mellem tekst og listen
  itemsep=-1ex,								% Vertikal afstand mellem items
}

% ¤¤ Visuelle referencer ¤¤ %
\usepackage[colorlinks]{hyperref}			% Danner klikbare referencer (hyperlinks) i dokumentet.
\hypersetup{colorlinks = true,				% Opsaetning af farvede hyperlinks (interne links, citeringer og URL)
    linkcolor = black,
    citecolor = black,
    urlcolor = black
}

% ¤¤ Opsaetning af figur- og tabeltekst ¤¤ %
\captionnamefont{\small\bfseries\itshape}	% Opsaetning af tekstdelen ('Figur' eller 'Tabel')
\captiontitlefont{\small}					% Opsaetning af nummerering
\captiondelim{. }							% Seperator mellem nummerering og figurtekst
\hangcaption								% Venstrejusterer flere-liniers figurtekst under hinanden
\captionwidth{\linewidth}					% Bredden af figurteksten
\setlength{\belowcaptionskip}{0pt}			% Afstand under figurteksten


% ¤¤ Opsaetning af commands til semantic ¤¤ %
% Pil

\newcommand{\ra}[1][\relax]{\ensuremath \rightarrow_{#1}}
\newcommand{\Ra}[1][\relax]{\ensuremath \Rightarrow_{#1}}
\newcommand{\Raa}{\ensuremath \Rightarrow_{a}}
\newcommand{\Rab}{\ensuremath \Rightarrow_{b}}
\newcommand{\ram}{\ensuremath \rightarrow_{M}}
\newcommand{\Raexp}{\ensuremath \Rightarrow_{exp}}
\newcommand{\raexp}{\ensuremath \rightarrow_{exp}}
\newcommand{\RaS}{\ensuremath \Rightarrow_{S}}
\newcommand{\raS}{\ensuremath \rightarrow_{S}}
\newcommand{\rhu}{\ensuremath \rightharpoonup}

% Logiske konnektiver

\newcommand{\logand}{\wedge}
\newcommand{\logor}{\vee}
\newcommand{\sand}{t\!\!t}
\newcommand{\falsk}{f\!\!f}

% Kantede parenteser

\newcommand{\lag}{\langle}
\newcommand{\rag}{\rangle}

% Next

\newcommand{\nexte}{\textrm{next}}

% Syntaks

\newcommand{\while}[2]{\texttt{while}\;#1 \; \texttt{do}\; #2}
\newcommand{\ifs}[3]{\texttt{if}\;\;#1 \; \texttt{then}\; #2 \; \texttt{else}\; #3}


% Regler

% Med sidebetingelse

\newcommand{\newcondinfrule}[3]
           {\parbox{5.5cm}{$$ {\frac{#1}{#2}}{\qquad
            #3} \hfill  $$}}

% Uden sidebetingelse

\newcommand{\infrule}[2]
           {\parbox{4.5cm}{$$ \frac{#1}{#2}\hspace{.5cm}$$}}

% Navne på regler

\newcommand{\runa}[1]{\mbox{\textsc{\protect{(#1})}}}
\newcommand{\runatt}[2]{$[{\mbox{\textsc{#1}}}_{\mbox{\textsc{\small #2}}}]$}

% Forkortelse for environments

\newcommand{\envv}{env_{v}}
\newcommand{\envp}{env_{P}}
\newcommand{\envm}{env_{m}}
\newcommand{\envf}{env_{f}}
\newcommand{\envs}{env_{s}}
\newcommand{\envi}{env_{i}}
\newcommand{\envvsf}{env_{vsf}}
\newcommand{\envl}{env_{l}}
\newcommand{\stoenvl}[2]{\ensuremath sto^{#1}, \envl^{#2}}
\newcommand{\ve}{\vdash_{E}}
\newcommand{\ev}{E \vdash}

% ¤¤ Opsaetning af listings ¤¤ %

\usepackage{mathdots} %Ensures that dots (especially the \vdots used in the lstlistings) are scaled along with the text size.
\newcommand{\csharp}{C\texttt{\#} } % C#
\newcommand{\codeDots}{\tiny{\raisebox{-2pt}[0pt][0pt]{$\vdots$}}} % Code dots


\definecolor{commentGreen}{RGB}{34,139,24}
\definecolor{stringPurple}{RGB}{208,76,239}

\lstdefinelanguage{our_xml}
{
	basicstyle=\small,
	basicstyle=\ttfamily\scriptsize,
	captionpos=b,
	showstringspaces=false,					% Mellemrum i strenge enten vist eller blanke
	numbers=left, numberstyle=\tiny,		% Linjenumre
	tabsize=4,
	frame=single,
	language=XML
}



\lstdefinelanguage{inc_C}
{
	basicstyle=\small,
	basicstyle=\ttfamily\scriptsize,
	captionpos=b,
	showstringspaces=false,					% Mellemrum i strenge enten vist eller blanke
	numbers=left, numberstyle=\tiny,		% Linjenumre
	tabsize=4,
	frame=single,
	language=C
}

\lstdefinelanguage{my_c}{
	basicstyle=\footnotesize \ttfamily \color{black} \bfseries,   
	breakatwhitespace=false,       
	breaklines=true,               
	captionpos=b,                   
	commentstyle=\color{darkgreen},   
	deletekeywords={...},          
	escapeinside={\%*}{*)},                  
	frame=single,                  
	language=C++,                
	keywordstyle=\color{purple},  
	morekeywords={BRIEFDescriptorConfig,string,TiXmlNode,DetectorDescriptorConfigContainer,istringstream,cerr,exit,clock}, 
	identifierstyle=\color{black},
	stringstyle=\color{blue},      
	numbers=left,                 
	numbersep=5pt,                  
	numberstyle=\tiny\color{black}, 
	rulecolor=\color{black},        
	showspaces=false,               
	showstringspaces=false,        
	showtabs=false,                
	stepnumber=1,                   
	tabsize=5,                     
	title=\lstname,                 
}

\definecolor{darkgreen}{rgb}{0.01, 0.75, 0.24}
\lstdefinelanguage{our_java}
{
	basicstyle=\small,
	basicstyle=\ttfamily\scriptsize,
	captionpos=b,
	showstringspaces=false,					% Mellemrum i strenge enten vist eller blanke
	numbers=left, numberstyle=\tiny,		% Linjenumre
	tabsize=4,
	breaklines=true,						% wrap text
	frame=single,
	language=java,
	keywordstyle=\color{blue}\ttfamily,
               stringstyle=\color{red}\ttfamily,
               commentstyle=\color{darkgreen}\ttfamily,
    morekeywords={String, CreateChannel, JoinChannel, SendMessage, LeaveChannel, RequestChannels
    			  MessageTimer, FullMessage, BaseMessage, RequestLostPackage, MessageTimerWrapper
    			  Cache, CurrentMessage, ChannelList, RequestChannelsTimer, BroadcastManager, 
    			  PacketManager, ScanManager, System, MessageTimer, Integer, StringBuilder,
    		  	  BitSet, AdvertiseThread, List, ArrayList, Channel, ChannelDoesNotExistException,
    	  		  NameLengthException, AlreadySubscribedToChannelException, InvalidCharactersUsedException, 
      			  ChannelExistsInUnsubscribedListException, JabberCache, @Override, Bundle, WindowManager
      			  R, FragmentTransaction, ChannelListFragment, ChatFragment}, 
}

\lstdefinelanguage{text}
{
	basicstyle=\small,
	basicstyle=\ttfamily\scriptsize,
	captionpos=b,
	commentstyle=\color{darkgreen},
	morecomment=[l]{\#},
	showstringspaces=false,					% Mellemrum i strenge enten vist eller blanke
	numbers=left, numberstyle=\tiny,		% Linjenumre
	tabsize=4,
	breaklines=true,						% wrap text
	frame=single,
	keywordstyle=\color{blue}\ttfamily,
               stringstyle=\color{red}\ttfamily,
               commentstyle=\color{darkgreen}\ttfamily,
    morekeywords={}, 
}

\lstdefinelanguage{our_bash}
{
	basicstyle=\small,
	basicstyle=\ttfamily\scriptsize,
        captionpos=b,
	showstringspaces=false,					% Mellemrum i strenge enten vist eller blanke
	numbers=left, numberstyle=\tiny,		% Linjenumre
	tabsize=4,
        frame=single,
        language=bash
}

\lstdefinelanguage{inc_cpp}
{
	basicstyle=\small,
	basicstyle=\ttfamily\scriptsize,
	captionpos=b,
	showstringspaces=false,					% Mellemrum i strenge enten vist eller blanke
	numbers=left, numberstyle=\tiny,		% Linjenumre
	tabsize=4,
	frame=single,
        keywordstyle=\color{blue}\ttfamily,
        stringstyle=\color{red}\ttfamily,
        commentstyle=\color{green}\ttfamily,
	language=C++
}

%% DO NOT USE THIS! AS A UPPAAL STYLE PACKAGE EXISTS
\definecolor{uppCommentColor}{rgb}{0.4,0,0} % dark red
\definecolor{uppKeywordColor}{rgb}{0,0.4,0} % dark green
\definecolor{uppTypeColor}{rgb}{0,0.3,0} % darker green
\lstdefinelanguage{our_uppaal}
{
	basicstyle=\small,
	basicstyle=\ttfamily\scriptsize,
	captionpos=b,
	showstringspaces=false,					% Mellemrum i strenge enten vist eller blanke
	numbers=left, numberstyle=\tiny,		% Linjenumre
	tabsize=4,
	frame=single,
		keywordstyle=\color{uppKeywordColor}\ttfamily,
		stringstyle=\color{purple}\ttfamily,
		commentstyle=\color{uppCommentColor}\ttfamily,
	language=C++
}

% ¤¤ Navngivning ¤¤ %
\addto\captionsenglish{
	\renewcommand\appendixname{Appendix}
	\renewcommand\contentsname{Table of Contents}
	\renewcommand\appendixpagename{Appendix}
	\renewcommand\appendixtocname{Appendix}
	\renewcommand\cftchaptername{\chaptername~}				% Skriver "Kapitel" foran kapitlerne i indholdsfortegnelsen
	\renewcommand\cftappendixname{\appendixname~}			% Skriver "Appendiks" foran appendiks i indholdsfortegnelsen
}

% ¤¤ Kapiteludssende ¤¤ %
\definecolor{numbercolor}{gray}{0.7}		% Definerer en farve til brug til kapiteludseende
\newif\ifchapternonum

\makechapterstyle{jenor}{					% Definerer kapiteludseende frem til ...
  \renewcommand\beforechapskip{0pt}
  \renewcommand\printchaptername{}
  \renewcommand\printchapternum{}
  \renewcommand\printchapternonum{\chapternonumtrue}
  \renewcommand\chaptitlefont{\fontfamily{pbk}\fontseries{db}\fontshape{n}\fontsize{25}{35}\selectfont\raggedleft}
  \renewcommand\chapnumfont{\fontfamily{pbk}\fontseries{m}\fontshape{n}\fontsize{1in}{0in}\selectfont\color{numbercolor}}
  \renewcommand\printchaptertitle[1]{%
    \noindent
    \ifchapternonum
    \begin{tabularx}{\textwidth}{X}
    {\let\\\newline\chaptitlefont ##1\par}
    \end{tabularx}
    %\par\vskip-2.5mm\hrule
    \else
    \begin{tabularx}{\textwidth}{Xl}
    {\parbox[b]{\linewidth}{\chaptitlefont ##1}} & \raisebox{-15pt}{\chapnumfont \thechapter}
    \end{tabularx}
    %\par\vskip2mm\hrule
    \fi
  }
}											% ... her

\chapterstyle{jenor}						% Valg af kapiteludseende - Google 'memoir chapter styles' for alternativer

% ¤¤ Sidehoved ¤¤ %

\makepagestyle{AAU}							% Definerer sidehoved og sidefod udseende frem til ...
\makepsmarks{AAU}{%
	\createmark{chapter}{left}{shownumber}{}{. \ }
	\createmark{section}{right}{shownumber}{}{. \ }
	\createplainmark{toc}{both}{\contentsname}
	\createplainmark{lof}{both}{\listfigurename}
	\createplainmark{lot}{both}{\listtablename}
	\createplainmark{bib}{both}{\bibname}
	\createplainmark{index}{both}{\indexname}
	\createplainmark{glossary}{both}{\glossaryname}
}
\nouppercaseheads											% Ingen Caps oenskes

\makeevenhead{AAU}{DEIS903E17}{}{\leftmark}				% Definerer lige siders sidehoved (\makeevenhead{Navn}{Venstre}{Center}{Hoejre})
\makeoddhead{AAU}{\rightmark}{}{Aalborg University}		% Definerer ulige siders sidehoved (\makeoddhead{Navn}{Venstre}{Center}{Hoejre})
\makeevenfoot{AAU}{\thepage}{}{}							% Definerer lige siders sidefod (\makeevenfoot{Navn}{Venstre}{Center}{Hoejre})
\makeoddfoot{AAU}{}{}{\thepage}								% Definerer ulige siders sidefod (\makeoddfoot{Navn}{Venstre}{Center}{Hoejre})
\makeheadrule{AAU}{\textwidth}{0.5pt}						% Tilfoejer en streg under sidehovedets indhold
\makefootrule{AAU}{\textwidth}{0.5pt}{1mm}					% Tilfoejer en streg under sidefodens indhold

\copypagestyle{AAUchap}{AAU}								% Sidehoved for kapitelsider defineres som standardsider, men med blank sidehoved
\makeoddhead{AAUchap}{}{}{}
\makeevenhead{AAUchap}{}{}{}
\makeheadrule{AAUchap}{\textwidth}{0pt}
\aliaspagestyle{chapter}{AAUchap}							% Den ny style vaelges til at gaelde for chapters
															% ... her

\pagestyle{AAU}												% Valg af sidehoved og sidefod


%%%% CUSTOM COMMANDS %%%%
\usepackage[super]{nth}

%%%% Tabular extensions %%%%%  
\usepackage{makecell} %allows linebreak in cells with \makecell{a \\ b}
\renewcommand{\arraystretch}{1.1}

%%%% Tabular extensions %%%%%  
\usepackage{makecell} %allows linebreak in cells with \makecell{a \\ b}
\newcolumntype{?}{!{\vrule width 1pt}} %Replacing | with ? will make thick vertical lines


% ¤¤ Billede hack ¤¤ %
\newcommand{\figur}[5]{
		\begin{figure}[#1] \centering
			\includegraphics[width=#2\textwidth]{graphics/#3}
			\caption{#4}\label{#5}
		\end{figure}
}

%%%% SIGNATUR %%%%%
\newcommand{\signature}[1]{
\begin{minipage}[c]{\textwidth}
\vspace{2cm}

\makebox[7cm][c]{
\hfill \makebox[7cm] {\hrulefill}
}

\makebox[7cm][c]{
 \hfill #1 \hfill
}
\end{minipage}
}

%%%% Personlige FixMes %%%%

\newcommand{\afx}[1]{
	\fxnote[author=Anders]{#1}
}
\newcommand{\jfx}[1]{
	\fxnote[author=Jacob]{#1}
}
\newcommand{\ofx}[1]{
	\fxnote[author=Oliver]{#1}
}

% ¤¤ Specielle tegn ¤¤ %
\newcommand{\decC}{^{\circ}\text{C}}
\newcommand{\dec}{^{\circ}}
\newcommand{\m}{\cdot}
\usepackage[noabbrev]{cleveref}						% Tillader brug af \cref, skal stå efter hyperref for at virke


%%%% ORDDELING %%%%

\hyphenation{}

%%Glossary
\usepackage[toc]{glossaries}					% Terminologi- eller symbolliste (se mere i Daleifs Latex-bog)
\makeglossaries
\definecolor{darkblue}{RGB}{0,0,125}
\usepackage{tikz}                               %Used to make common UML diagrams.
\usetikzlibrary{arrows,shapes,snakes,automata,backgrounds,petri}

\tikzstyle{location}=[circle,thick,draw=black!75,fill=darkblue!20,minimum size=6mm]
\tikzstyle{init}=[circle,double,thick,draw=black!75,fill=darkblue!20,minimum size=7mm]

\definecolor{select}{RGB}{204, 153, 0}
\definecolor{guard}{RGB}{51, 153, 102}
\definecolor{sync}{RGB}{0, 153, 255}
\definecolor{update}{RGB}{0, 102, 204}
\definecolor{name}{RGB}{102, 0, 51}
\definecolor{invariant}{RGB}{204, 0, 204}
\definecolor{RoE}{RGB}{255, 51, 204}
\DeclareUnicodeCharacter{2201}{\test}